/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    QC Strategy Profiles for Nanopore Data
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Predefined QC configurations optimized for different nanopore use cases
    
    Usage: nextflow run . -profile docker,nanopore_strict
           nextflow run . -profile docker,nanopore_metagenomics
    
    Available profiles:
    - nanopore_strict: Stringent QC for high-quality analysis (genomics, variant calling)
    - nanopore_balanced: Balanced QC for general use (default recommended)
    - nanopore_permissive: Permissive QC for low-coverage or contaminated samples
    - nanopore_metagenomics: Optimized for metagenomic analysis
    - nanopore_assembly: Optimized for genome assembly projects
    - nanopore_rna: Optimized for RNA/transcriptomic analysis
----------------------------------------------------------------------------------------
*/

profiles {
    
    // High-quality genomics and variant calling
    nanopore_strict {
        params {
            // Use FILTLONG for nanopore-optimized filtering
            qc_tool                    = 'filtlong'
            enable_adapter_trimming    = true
            
            // Stringent FILTLONG parameters
            filtlong_min_length        = 2000     // Higher minimum length
            filtlong_keep_percent      = 75       // Keep only top 75% of reads
            filtlong_target_bases      = 0        // No base limit
            filtlong_min_mean_q        = 10.0     // Higher quality threshold
            
            // Enable comprehensive QC visualization
            skip_nanoplot              = false
        }
    }
    
    // Balanced settings for general nanopore use
    nanopore_balanced {
        params {
            // Use FILTLONG for nanopore-optimized filtering
            qc_tool                    = 'filtlong'
            enable_adapter_trimming    = true
            
            // Balanced FILTLONG parameters (default values)
            filtlong_min_length        = 1000     // Standard minimum length
            filtlong_keep_percent      = 90       // Keep 90% of reads
            filtlong_target_bases      = 0        // No base limit
            filtlong_min_mean_q        = 8.0      // Standard quality threshold
            
            // Enable comprehensive QC visualization
            skip_nanoplot              = false
        }
    }
    
    // Permissive settings for challenging samples
    nanopore_permissive {
        params {
            // Use FILTLONG for nanopore-optimized filtering
            qc_tool                    = 'filtlong'
            enable_adapter_trimming    = false    // No adapter trimming for speed
            
            // Permissive FILTLONG parameters
            filtlong_min_length        = 500      // Lower minimum length
            filtlong_keep_percent      = 95       // Keep most reads
            filtlong_target_bases      = 0        // No base limit
            filtlong_min_mean_q        = 6.0      // Lower quality threshold
            
            // Enable comprehensive QC visualization
            skip_nanoplot              = false
        }
    }
    
    // Optimized for metagenomic analysis
    nanopore_metagenomics {
        params {
            // Use FILTLONG for nanopore-optimized filtering
            qc_tool                    = 'filtlong'
            enable_adapter_trimming    = true
            
            // Metagenomics-optimized FILTLONG parameters
            filtlong_min_length        = 1000     // Standard minimum for taxonomy
            filtlong_keep_percent      = 85       // Remove low-quality reads
            filtlong_target_bases      = 0        // No base limit for diversity
            filtlong_min_mean_q        = 9.0      // Higher quality for accuracy
            
            // Metagenomics-specific settings
            save_reads_assignment      = true     // Save taxonomic assignments
            enable_taxpasta_standardization = true
            taxpasta_format            = 'tsv'    // Standard format for downstream analysis
            
            // Enable comprehensive QC visualization
            skip_nanoplot              = false
        }
    }
    
    // Optimized for genome assembly
    nanopore_assembly {
        params {
            // Use FILTLONG for nanopore-optimized filtering
            qc_tool                    = 'filtlong'
            enable_adapter_trimming    = true
            
            // Assembly-optimized FILTLONG parameters
            filtlong_min_length        = 1500     // Longer reads for assembly
            filtlong_keep_percent      = 80       // Quality over quantity
            filtlong_target_bases      = 0        // No base limit
            filtlong_min_mean_q        = 9.0      // Higher quality for assembly
            
            // Assembly-specific settings
            enable_assembly            = true
            assembler                  = 'flye'
            genome_size                = '5m'     // Adjust based on organism
            sequencing_mode            = '--nano-raw'
            
            // Enable comprehensive QC visualization
            skip_nanoplot              = false
        }
    }
    
    // Optimized for RNA/transcriptomic analysis
    nanopore_rna {
        params {
            // Use FASTP for RNA data (better adapter handling)
            qc_tool                    = 'fastp'
            
            // RNA-optimized FASTP parameters
            fastp_qualified_quality    = 10       // Lower quality threshold for RNA
            fastp_length_required      = 500      // Shorter minimum for transcripts
            fastp_cut_mean_quality     = 15       // Moderate sliding window
            
            // RNA-specific settings
            enable_assembly            = false    // Usually not needed for RNA
            
            // Enable comprehensive QC visualization
            skip_nanoplot              = false
        }
    }
    
    // Legacy profile using FASTP (for comparison/compatibility)
    nanopore_fastp_legacy {
        params {
            // Use FASTP (original tool)
            qc_tool                    = 'fastp'
            enable_adapter_trimming    = false
            
            // Standard FASTP parameters
            fastp_qualified_quality    = 15
            fastp_length_required      = 1000
            fastp_cut_mean_quality     = 20
            
            // Enable comprehensive QC visualization
            skip_nanoplot              = false
        }
    }
}