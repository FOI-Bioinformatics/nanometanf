/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Local testing configuration with reduced resource requirements
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

process {
    // Set maximum resources for local testing
    resourceLimits = [
        cpus: 2,
        memory: '4.GB',
        time: '1.h'
    ]

    // Override specific process memory requirements
    withName: 'FOIBIOINFORMATICS_NANOMETANF:NANOMETANF:QC_ANALYSIS:FASTP' {
        memory = '2.GB'
        cpus = 1
    }
    
    withName: 'FOIBIOINFORMATICS_NANOMETANF:NANOMETANF:QC_ANALYSIS:NANOPLOT' {
        memory = '2.GB'
        cpus = 1
    }
    
    withName: 'FOIBIOINFORMATICS_NANOMETANF:NANOMETANF:MULTIQC' {
        memory = '2.GB'
        cpus = 1
    }
}

// Disable Docker for testing - use local tools
docker {
    enabled = false
}

// Add dorado to PATH
env {
    PATH = "/Users/andreassjodin/Downloads/dorado-1.1.1-osx-arm64/bin:$PATH"
}

params {
    config_profile_name        = 'Local test profile'
    config_profile_description = 'Minimal resource test configuration for local development'
    
    // Reduce resource requirements
    max_cpus = 2
    max_memory = '4.GB'
    max_time = '1.h'
}