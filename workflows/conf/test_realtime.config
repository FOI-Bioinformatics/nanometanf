/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Nextflow config file for testing real-time processing
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Defines configuration for testing the real-time file monitoring capabilities.

    Use as follows:
        nextflow run foi-bioinformatics/nanometanf -profile test_realtime,docker --outdir <OUTDIR>

----------------------------------------------------------------------------------------
*/

process {
    resourceLimits = [
        cpus: 4,
        memory: '15.GB',
        time: '2.h'
    ]
}

params {
    config_profile_name        = 'Real-time test profile'
    config_profile_description = 'Test profile for real-time file monitoring'

    // Real-time processing configuration
    realtime_mode              = true
    nanopore_output_dir        = './test_data/nanopore_output'
    file_pattern               = "*.fastq.gz"
    batch_size                 = 5
    batch_interval             = "2min"
    max_files                  = 20

    // Demultiplexing configuration
    use_dorado                 = true
    barcode_kit                = 'SQK-PBK004'

    // Kraken2 classification
    kraken2_db                 = './test_data/kraken2_db'
    save_output_fastqs         = true
    save_reads_assignment      = true

    // BLAST validation
    blast_validation           = true
    blast_db                   = './test_data/blast_db'
    validation_taxa            = ['Escherichia', 'Salmonella']

    // QC options
    skip_fastp                 = false
    skip_nanoplot              = false

    // Disable input samplesheet for real-time mode
    input                      = null
}